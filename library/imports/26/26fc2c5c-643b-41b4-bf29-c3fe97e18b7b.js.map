{"version":3,"sources":["assets\\Scripts\\DiemSo.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst { ccclass, property } = cc._decorator;\r\nimport FBInstantManager from \"./FBInstantManager\";\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n  @property(cc.Node)\r\n  DiemTween: cc.Node = null;\r\n  @property(cc.Node)\r\n  HighScoreLabel: cc.Node = null;\r\n  // @property(cc.Node)\r\n  // DiemLable: cc.Node = null\r\n  Diem: number = 0;\r\n  HighScore: number = 0;\r\n\r\n  onLoad() {\r\n    if(FBInstantManager.getInstance().getPlayerId() !== 'localId'){\r\n      FBInstant.player.getDataAsync([\r\n        'Diem',\r\n        'HighScore',\r\n      ]).then(\r\n        function(data){\r\n          this.Diem = data['Diem']\r\n          this.HighScore = data['HighScore']\r\n        }\r\n      )\r\n    }\r\n    else\r\n    {\r\n      this.Diem = Number(cc.sys.localStorage.getItem(\"diem\"));\r\n      this.HighScore = Number(cc.sys.localStorage.getItem(\"highscore\"));\r\n    }\r\n  }\r\n\r\n  congDiem() {\r\n    // cc.sys.localStorage.setItem('highscore', 0)\r\n    cc.tween(this.DiemTween)\r\n      .to(0.5, { angle: this.Diem }, { easing: \"cubicOut\" })\r\n      .call(() => {\r\n        \r\n        if (FBInstantManager.getInstance().getPlayerId() !== 'localId') {\r\n          FBInstant.player.setDataAsync({\r\n            \"Diem\": this.Diem,\r\n            \"HighScore\": this.HighScore,\r\n          }).then(function(data){\r\n            console.log(\"Data setted\")\r\n          });\r\n        }else{\r\n          cc.sys.localStorage.setItem(\"diem\", this.Diem);\r\n          cc.sys.localStorage.setItem(\"highscore\", this.HighScore);\r\n        }\r\n        if (this.HighScore <= this.Diem) this.HighScore = this.Diem;\r\n        \r\n      })\r\n      .start();\r\n  }\r\n\r\n  update() {\r\n    let diem = Math.floor(this.DiemTween.angle);\r\n    this.node.getComponent(cc.Label).string = diem.toString();\r\n    this.HighScoreLabel.getComponent(cc.Label).string =\r\n      this.HighScore.toString();\r\n  }\r\n}\r\n"]}