{"version":3,"sources":["assets\\BackUpScripts\\TripleBlock.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\r\n    @property(cc.Prefab)\r\n    Block: cc.Prefab = null\r\n    Board: cc.Node = null\r\n    VTBlock: cc.Vec2[] = [cc.v2(-72,0),cc.v2(0,0),cc.v2(72,0)]\r\n    VTBlockQuay: cc.Vec2[] = [cc.v2(-72,0),cc.v2(0,72),cc.v2(72,0),cc.v2(0,-72)]\r\n    BlockArray: cc.Node[] = []\r\n    CoTheDat = false\r\n    TouchStartLocation: cc.Vec2 = null\r\n    TouchEndLocation: cc.Vec2 = null\r\n    Index = 0\r\n    onLoad()\r\n    {\r\n        this.node.on(cc.Node.EventType.TOUCH_START, this.onTouchStart, this)\r\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, this.onTouchMove, this)\r\n        this.node.on(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this)\r\n        this.Board = cc.find('Canvas/Screen2/Board')\r\n        for(let i=0;i<3;i++)\r\n        {\r\n            this.taoBlock(i)\r\n        }\r\n    }\r\n    onTouchStart(event: cc.Event.EventTouch)\r\n    {\r\n        this.TouchStartLocation = event.getLocation()\r\n    }\r\n\r\n    onTouchMove(event: cc.Event.EventTouch)\r\n    {\r\n        let touch = event.getTouches()[0]\r\n        let touch_pos = touch.getLocation()\r\n        let standard_touch_pos = this.Board.convertToNodeSpaceAR(touch_pos)\r\n        this.node.setPosition(standard_touch_pos)\r\n    }\r\n    onTouchEnd(event: cc.Event.EventTouch)\r\n    {\r\n        this.TouchEndLocation = event.getLocation()\r\n        if(this.TouchEndLocation.sub(this.TouchStartLocation).mag()<10)\r\n        {\r\n            this.rotate()\r\n        }\r\n        for(let i =0;i<3;i++)\r\n        {\r\n            if(this.BlockArray[i].getComponent(\"Block\").CoTheDat&&this.BlockArray[i].getComponent(\"Block\").Ngang!=null&&this.BlockArray[i].getComponent(\"Block\").Doc!=null)\r\n            this.CoTheDat = true\r\n            else\r\n            {\r\n                this.CoTheDat = false\r\n                break\r\n            }\r\n        }\r\n        if(this.CoTheDat)\r\n        {\r\n            for(let i=0;i<3;i++)\r\n            {\r\n                this.Board.getComponent(\"Board\").BlockArray[this.BlockArray[i].getComponent(\"Block\").Ngang][this.BlockArray[i].getComponent(\"Block\").Doc].destroy()\r\n                this.Board.getComponent(\"Board\").BlockArray[this.BlockArray[i].getComponent(\"Block\").Ngang][this.BlockArray[i].getComponent(\"Block\").Doc] = this.BlockArray[i]\r\n                // this.Board.addChild(this.BlockArray.shift())\r\n                this.BlockArray[i].setPosition(this.Board.getComponent(\"Board\").VTNgang[this.BlockArray[i].getComponent(\"Block\").Doc],this.Board.getComponent(\"Board\").VTDoc[this.BlockArray[i].getComponent(\"Block\").Ngang])\r\n                this.node.setPosition(0,0)\r\n                // this.Board.getComponent(\"Board\").taoBlock()\r\n                console.log(this.BlockArray[i].x,this.BlockArray[i].y)\r\n                this.node.off(cc.Node.EventType.TOUCH_START, this.onTouchStart, this)\r\n                this.node.off(cc.Node.EventType.TOUCH_MOVE, this.onTouchMove, this)\r\n                this.node.off(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this)\r\n            }\r\n            this.Board.getComponent(\"Board\").taoBlockNgauNhien()\r\n            this.Board.getComponent(\"Board\").checkMerge()\r\n            // for(let i=0;i<2;i++)\r\n            // this.Board.addChild(this.BlockArray.shift())\r\n        }\r\n        else this.node.setPosition(0,-450)\r\n    }\r\n    taoBlock(index: number)\r\n    {\r\n        let block = cc.instantiate(this.Block)\r\n        this.node.addChild(block)\r\n        this.BlockArray.push(block)\r\n        block.setPosition(this.VTBlock[index])\r\n        let number = Math.floor(Math.random()*3)+1\r\n        block.getComponent(\"Block\").setUp(number)\r\n        block.getComponent(\"Block\").turnOffListener()\r\n    }\r\n    rotate()\r\n    {\r\n        this.Index ++\r\n        for(let i=0;i<3;i+=2)\r\n        {\r\n            cc.tween(this.BlockArray[i]).to(0.1,{x: this.VTBlockQuay[(this.Index+i)%4].x,y: this.VTBlockQuay[(this.Index+i)%4].y}).start()\r\n        }\r\n    }\r\n}\r\n"]}